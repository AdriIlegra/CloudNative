-- This script was generated by the ERD tool in pgAdmin 4.
-- Please log an issue at https://redmine.postgresql.org/projects/pgadmin4/issues/new if you find any bugs, including reproduction steps.
BEGIN;


CREATE TABLE IF NOT EXISTS public.curso
(
    id integer NOT NULL,
    nome character varying(255) COLLATE pg_catalog."default",
    numero_identificacao character varying(20) COLLATE pg_catalog."default",
    CONSTRAINT curso_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.disciplina
(
    id integer NOT NULL,
    nome character varying(255) COLLATE pg_catalog."default",
    carga_horaria integer,
    codigo character varying(20) COLLATE pg_catalog."default",
    sala character varying(20) COLLATE pg_catalog."default",
    id_curso integer,
    id_professor integer,
    CONSTRAINT disciplina_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.professor
(
    id integer NOT NULL,
    nome character varying(255) COLLATE pg_catalog."default",
    email character varying(255) COLLATE pg_catalog."default",
    telefone character varying(20) COLLATE pg_catalog."default",
    CONSTRAINT professor_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.matricula
(
    id integer NOT NULL,
    id_aluno integer,
    id_disciplina integer,
    nota numeric(3, 1),
    CONSTRAINT matricula_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.aluno
(
    id integer NOT NULL,
    nome character varying(255) COLLATE pg_catalog."default",
    email character varying(255) COLLATE pg_catalog."default",
    telefone character varying(20) COLLATE pg_catalog."default",
    cpf character varying(14) COLLATE pg_catalog."default",
    CONSTRAINT aluno_pkey PRIMARY KEY (id)
);

ALTER TABLE IF EXISTS public.disciplina
    ADD CONSTRAINT disciplina_id_curso_fkey FOREIGN KEY (id_curso)
    REFERENCES public.curso (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.disciplina
    ADD CONSTRAINT disciplina_id_professor_fkey FOREIGN KEY (id_professor)
    REFERENCES public.professor (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.matricula
    ADD CONSTRAINT matricula_id_aluno_fkey FOREIGN KEY (id_aluno)
    REFERENCES public.aluno (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.matricula
    ADD CONSTRAINT matricula_id_disciplina_fkey FOREIGN KEY (id_disciplina)
    REFERENCES public.disciplina (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;

END;